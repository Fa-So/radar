<div class="config">

  <div connection-setup connect="connect(url)" disconnect="disconnect(url)" status="status">
  </div>

  <form name="fetchForm" class="fetch-settings connection-status-{{status}}" ng-submit="fetch()">

    <fieldset ng-disabled="status !== 'connected'">
      <legend>Path</legend>
      <!-- <input ng-model="fetchCaseSensitive" type="checkbox"><label>Case Sensitive</label> -->
      <div class="path-filters" ng-repeat="pathFilter in pathFilters">
        <input
        floatlabel="pathFilter.op"
        placeholder="pathFilter.op + ' ' + pathFilter.info"
        type="text"
        ng-model="pathFilter.value"
        class="floatlabel path-filter"
        tabindex="4"
        >
      </div>
    </fieldset>

    <fieldset ng-disabled="status !== 'connected'">
      <legend>Value</legend>
      <div class="value-filters">
        <div class="value-filter" ng-repeat="valueFilter in valueFilters">
          <input
          placeholder="[sub.address] == false"
          type="text"
          ng-model="valueFilter"
          value-rule
          >
        </div>
      </fieldset>

      <fieldset ng-disabled="status !== 'connected'">
        <legend>Sort</legend>
        <div class="radio-group">
          <span class="radio-item">
            <input type="radio" name="sort-dir" ng-model="fetchSortDirection" value="descending" ><label>descending</label>
          </span>
          <span class="radio-item">
            <input type="radio" name="sort-dir" ng-model="fetchSortDirection" value="ascending"><label>ascending</label>
          </span>
        </div>
      <div class="radio-group">
        <span class="radio-item">
          <input type="radio" name="sort-crit" ng-model="fetchSortCriteria" value="byPath" ><label>by Path</label>
        </span>
        <span class="radio-item">
          <input type="radio" name="sort-crit" ng-model="fetchSortCriteria" value="byValue"><label>by Value</label>
        </span>
      </div>
      <div ng-show="fetchSortCriteria === 'byValue'" class="radio-group">
        <span class="radio-item">
          <input type="radio" name="sort-type" ng-model="fetchSortByValueType" value="string" ><label>is String</label>
        </span>
        <span class="radio-item">
          <input type="radio" name="sort-type" ng-model="fetchSortByValueType" value="number"><label>is Number</label>
        </span>
      </div>
      <input ng-show="fetchSortCriteria === 'byValue'" type="text" placeholder="address.street (optional)" ng-model="fetchSortByValueFieldString">
      </fieldset>
      <button ng-disabled="fetchForm.$invalid || status !== 'connected'" type="submit" ng-class="{nofetch: !!!elements}">fetch</button
    </form>
    <!-- <label>JSON</label><input ng-model="showFetchExpressionAsJSON" type="checkbox" value="JSON">
    <form ng-show="showFetchExpressionAsJSON">
      <textarea disabled ng-model="fetchExpressionJSON">
      </textarea>
    </form> -->


  </div>


<div class="fetch-panel">
  <h2 ng-if="status !== 'connected'">Not connected to Daemon</h2>
<h2 ng-if="status === 'connected' && !!!elements">Press Fetch</h2>
<h2 ng-if="elements.length === 0">No Matches for Fetch</h2>
  <ul class="elements">

    <li class="element" ng-repeat="element in elements">
      <div ng-if="element.$call" method="element"></div>
      <div ng-if="element.$save" state="element"></div>
    </li>

  </ul>
  
</div>
